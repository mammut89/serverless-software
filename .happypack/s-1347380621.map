{"version":3,"sources":["node_modules/history/lib/createBrowserHistory.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_interopRequireDefault","obj","_invariant","require","_invariant2","_Actions","_PathUtils","_ExecutionEnvironment","_DOMUtils","_DOMStateStorage","_createDOMHistory","_createDOMHistory2","createBrowserHistory","options","undefined","canUseDOM","process","env","NODE_ENV","forceRefresh","isSupported","supportsHistory","useRefresh","getCurrentLocation","historyState","window","history","state","e","path","getWindowPath","_historyState","readState","createKey","replaceState","location","parsePath","createLocation","startPopStateListener","_ref","transitionTo","popStateListener","event","addEventListener","removeEventListener","finishTransition","basename","pathname","search","hash","action","POP","saveState","PUSH","href","pushState","replace","listenerCount","stopPopStateListener","listenBefore","listener","unlisten","listen","registerTransitionHook","hook","unregisterTransitionHook","module"],"mappings":"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","file":"createBrowserHistory.js","sourceRoot":"/Users/mo/serverless-software","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _invariant = require('invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _Actions = require('./Actions');\n\nvar _PathUtils = require('./PathUtils');\n\nvar _ExecutionEnvironment = require('./ExecutionEnvironment');\n\nvar _DOMUtils = require('./DOMUtils');\n\nvar _DOMStateStorage = require('./DOMStateStorage');\n\nvar _createDOMHistory = require('./createDOMHistory');\n\nvar _createDOMHistory2 = _interopRequireDefault(_createDOMHistory);\n\n/**\n * Creates and returns a history object that uses HTML5's history API\n * (pushState, replaceState, and the popstate event) to manage history.\n * This is the recommended method of managing history in browsers because\n * it provides the cleanest URLs.\n *\n * Note: In browsers that do not support the HTML5 history API full\n * page reloads will be used to preserve URLs.\n */\nfunction createBrowserHistory() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  !_ExecutionEnvironment.canUseDOM ? process.env.NODE_ENV !== 'production' ? _invariant2['default'](false, 'Browser history needs a DOM') : _invariant2['default'](false) : undefined;\n\n  var forceRefresh = options.forceRefresh;\n\n  var isSupported = _DOMUtils.supportsHistory();\n  var useRefresh = !isSupported || forceRefresh;\n\n  function getCurrentLocation(historyState) {\n    try {\n      historyState = historyState || window.history.state || {};\n    } catch (e) {\n      historyState = {};\n    }\n\n    var path = _DOMUtils.getWindowPath();\n    var _historyState = historyState;\n    var key = _historyState.key;\n\n    var state = undefined;\n    if (key) {\n      state = _DOMStateStorage.readState(key);\n    } else {\n      state = null;\n      key = history.createKey();\n\n      if (isSupported) window.history.replaceState(_extends({}, historyState, { key: key }), null);\n    }\n\n    var location = _PathUtils.parsePath(path);\n\n    return history.createLocation(_extends({}, location, { state: state }), undefined, key);\n  }\n\n  function startPopStateListener(_ref) {\n    var transitionTo = _ref.transitionTo;\n\n    function popStateListener(event) {\n      if (event.state === undefined) return; // Ignore extraneous popstate events in WebKit.\n\n      transitionTo(getCurrentLocation(event.state));\n    }\n\n    _DOMUtils.addEventListener(window, 'popstate', popStateListener);\n\n    return function () {\n      _DOMUtils.removeEventListener(window, 'popstate', popStateListener);\n    };\n  }\n\n  function finishTransition(location) {\n    var basename = location.basename;\n    var pathname = location.pathname;\n    var search = location.search;\n    var hash = location.hash;\n    var state = location.state;\n    var action = location.action;\n    var key = location.key;\n\n    if (action === _Actions.POP) return; // Nothing to do.\n\n    _DOMStateStorage.saveState(key, state);\n\n    var path = (basename || '') + pathname + search + hash;\n    var historyState = {\n      key: key\n    };\n\n    if (action === _Actions.PUSH) {\n      if (useRefresh) {\n        window.location.href = path;\n        return false; // Prevent location update.\n      } else {\n          window.history.pushState(historyState, null, path);\n        }\n    } else {\n      // REPLACE\n      if (useRefresh) {\n        window.location.replace(path);\n        return false; // Prevent location update.\n      } else {\n          window.history.replaceState(historyState, null, path);\n        }\n    }\n  }\n\n  var history = _createDOMHistory2['default'](_extends({}, options, {\n    getCurrentLocation: getCurrentLocation,\n    finishTransition: finishTransition,\n    saveState: _DOMStateStorage.saveState\n  }));\n\n  var listenerCount = 0,\n      stopPopStateListener = undefined;\n\n  function listenBefore(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listenBefore(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  function listen(listener) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    var unlisten = history.listen(listener);\n\n    return function () {\n      unlisten();\n\n      if (--listenerCount === 0) stopPopStateListener();\n    };\n  }\n\n  // deprecated\n  function registerTransitionHook(hook) {\n    if (++listenerCount === 1) stopPopStateListener = startPopStateListener(history);\n\n    history.registerTransitionHook(hook);\n  }\n\n  // deprecated\n  function unregisterTransitionHook(hook) {\n    history.unregisterTransitionHook(hook);\n\n    if (--listenerCount === 0) stopPopStateListener();\n  }\n\n  return _extends({}, history, {\n    listenBefore: listenBefore,\n    listen: listen,\n    registerTransitionHook: registerTransitionHook,\n    unregisterTransitionHook: unregisterTransitionHook\n  });\n}\n\nexports['default'] = createBrowserHistory;\nmodule.exports = exports['default'];"]}
{"version":3,"sources":["node_modules/react-router/lib/AsyncUtils.js"],"names":["exports","__esModule","loopAsync","mapAsync","turns","work","callback","currentTurn","isDone","sync","hasNext","doneArgs","done","concat","Array","prototype","slice","call","arguments","apply","next","array","length","values","doneCount","index","error","value","forEach","item"],"mappings":"AAAA;;AAEAA,QAAQC,UAAR,GAAqB,IAArB;AACAD,QAAQE,SAAR,GAAoBA,SAApB;AACAF,QAAQG,QAAR,GAAmBA,QAAnB;AACA,SAASD,SAAT,CAAmBE,KAAnB,EAA0BC,IAA1B,EAAgCC,QAAhC,EAA0C;AACxC,MAAIC,cAAc,CAAlB;AAAA,MACIC,SAAS,KADb;AAEA,MAAIC,OAAO,KAAX;AAAA,MACIC,UAAU,KADd;AAAA,MAEIC,WAAW,KAAK,CAFpB;;AAIA,WAASC,IAAT,GAAgB;AACdJ,aAAS,IAAT;AACA,QAAIC,IAAJ,EAAU;AACR;AACAE,iBAAW,GAAGE,MAAH,CAAUC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAV,CAAX;AACA;AACD;;AAEDZ,aAASa,KAAT,CAAe,IAAf,EAAqBD,SAArB;AACD;;AAED,WAASE,IAAT,GAAgB;AACd,QAAIZ,MAAJ,EAAY;AACV;AACD;;AAEDE,cAAU,IAAV;AACA,QAAID,IAAJ,EAAU;AACR;AACA;AACD;;AAEDA,WAAO,IAAP;;AAEA,WAAO,CAACD,MAAD,IAAWD,cAAcH,KAAzB,IAAkCM,OAAzC,EAAkD;AAChDA,gBAAU,KAAV;AACAL,WAAKY,IAAL,CAAU,IAAV,EAAgBV,aAAhB,EAA+Ba,IAA/B,EAAqCR,IAArC;AACD;;AAEDH,WAAO,KAAP;;AAEA,QAAID,MAAJ,EAAY;AACV;AACAF,eAASa,KAAT,CAAe,IAAf,EAAqBR,QAArB;AACA;AACD;;AAED,QAAIJ,eAAeH,KAAf,IAAwBM,OAA5B,EAAqC;AACnCF,eAAS,IAAT;AACAF;AACD;AACF;;AAEDc;AACD;;AAED,SAASjB,QAAT,CAAkBkB,KAAlB,EAAyBhB,IAAzB,EAA+BC,QAA/B,EAAyC;AACvC,MAAIgB,SAASD,MAAMC,MAAnB;AACA,MAAIC,SAAS,EAAb;;AAEA,MAAID,WAAW,CAAf,EAAkB,OAAOhB,SAAS,IAAT,EAAeiB,MAAf,CAAP;;AAElB,MAAIf,SAAS,KAAb;AAAA,MACIgB,YAAY,CADhB;;AAGA,WAASZ,IAAT,CAAca,KAAd,EAAqBC,KAArB,EAA4BC,KAA5B,EAAmC;AACjC,QAAInB,MAAJ,EAAY;;AAEZ,QAAIkB,KAAJ,EAAW;AACTlB,eAAS,IAAT;AACAF,eAASoB,KAAT;AACD,KAHD,MAGO;AACLH,aAAOE,KAAP,IAAgBE,KAAhB;;AAEAnB,eAAS,EAAEgB,SAAF,KAAgBF,MAAzB;;AAEA,UAAId,MAAJ,EAAYF,SAAS,IAAT,EAAeiB,MAAf;AACb;AACF;;AAEDF,QAAMO,OAAN,CAAc,UAAUC,IAAV,EAAgBJ,KAAhB,EAAuB;AACnCpB,SAAKwB,IAAL,EAAWJ,KAAX,EAAkB,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACxCf,WAAKa,KAAL,EAAYC,KAAZ,EAAmBC,KAAnB;AACD,KAFD;AAGD,GAJD;AAKD","file":"AsyncUtils.js","sourceRoot":"/Users/mo/serverless-software","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.loopAsync = loopAsync;\nexports.mapAsync = mapAsync;\nfunction loopAsync(turns, work, callback) {\n  var currentTurn = 0,\n      isDone = false;\n  var sync = false,\n      hasNext = false,\n      doneArgs = void 0;\n\n  function done() {\n    isDone = true;\n    if (sync) {\n      // Iterate instead of recursing if possible.\n      doneArgs = [].concat(Array.prototype.slice.call(arguments));\n      return;\n    }\n\n    callback.apply(this, arguments);\n  }\n\n  function next() {\n    if (isDone) {\n      return;\n    }\n\n    hasNext = true;\n    if (sync) {\n      // Iterate instead of recursing if possible.\n      return;\n    }\n\n    sync = true;\n\n    while (!isDone && currentTurn < turns && hasNext) {\n      hasNext = false;\n      work.call(this, currentTurn++, next, done);\n    }\n\n    sync = false;\n\n    if (isDone) {\n      // This means the loop finished synchronously.\n      callback.apply(this, doneArgs);\n      return;\n    }\n\n    if (currentTurn >= turns && hasNext) {\n      isDone = true;\n      callback();\n    }\n  }\n\n  next();\n}\n\nfunction mapAsync(array, work, callback) {\n  var length = array.length;\n  var values = [];\n\n  if (length === 0) return callback(null, values);\n\n  var isDone = false,\n      doneCount = 0;\n\n  function done(index, error, value) {\n    if (isDone) return;\n\n    if (error) {\n      isDone = true;\n      callback(error);\n    } else {\n      values[index] = value;\n\n      isDone = ++doneCount === length;\n\n      if (isDone) callback(null, values);\n    }\n  }\n\n  array.forEach(function (item, index) {\n    work(item, index, function (error, value) {\n      done(index, error, value);\n    });\n  });\n}"]}
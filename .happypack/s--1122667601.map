{"version":3,"sources":["node_modules/history/lib/useQueries.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_interopRequireDefault","obj","_warning","require","_warning2","_queryString","_runTransitionHook","_runTransitionHook2","_PathUtils","_deprecate","_deprecate2","SEARCH_BASE_KEY","defaultStringifyQuery","query","stringify","replace","defaultParseQueryString","parse","isNestedObject","object","p","Array","isArray","useQueries","createHistory","options","undefined","history","stringifyQuery","parseQueryString","addQuery","location","search","substring","searchBase","appendQuery","_extends2","searchBaseSpec","queryString","process","env","NODE_ENV","parsePath","listenBefore","hook","callback","listen","listener","push","createPath","createHref","createLocation","_len","args","_key","fullLocation","apply","concat","pushState","state","path","replaceState","module"],"mappings":"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","file":"useQueries.js","sourceRoot":"/Users/mo/serverless-software","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _warning = require('warning');\n\nvar _warning2 = _interopRequireDefault(_warning);\n\nvar _queryString = require('query-string');\n\nvar _runTransitionHook = require('./runTransitionHook');\n\nvar _runTransitionHook2 = _interopRequireDefault(_runTransitionHook);\n\nvar _PathUtils = require('./PathUtils');\n\nvar _deprecate = require('./deprecate');\n\nvar _deprecate2 = _interopRequireDefault(_deprecate);\n\nvar SEARCH_BASE_KEY = '$searchBase';\n\nfunction defaultStringifyQuery(query) {\n  return _queryString.stringify(query).replace(/%20/g, '+');\n}\n\nvar defaultParseQueryString = _queryString.parse;\n\nfunction isNestedObject(object) {\n  for (var p in object) {\n    if (Object.prototype.hasOwnProperty.call(object, p) && typeof object[p] === 'object' && !Array.isArray(object[p]) && object[p] !== null) return true;\n  }return false;\n}\n\n/**\n * Returns a new createHistory function that may be used to create\n * history objects that know how to handle URL queries.\n */\nfunction useQueries(createHistory) {\n  return function () {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    var history = createHistory(options);\n\n    var stringifyQuery = options.stringifyQuery;\n    var parseQueryString = options.parseQueryString;\n\n    if (typeof stringifyQuery !== 'function') stringifyQuery = defaultStringifyQuery;\n\n    if (typeof parseQueryString !== 'function') parseQueryString = defaultParseQueryString;\n\n    function addQuery(location) {\n      if (location.query == null) {\n        var search = location.search;\n\n        location.query = parseQueryString(search.substring(1));\n        location[SEARCH_BASE_KEY] = { search: search, searchBase: '' };\n      }\n\n      // TODO: Instead of all the book-keeping here, this should just strip the\n      // stringified query from the search.\n\n      return location;\n    }\n\n    function appendQuery(location, query) {\n      var _extends2;\n\n      var searchBaseSpec = location[SEARCH_BASE_KEY];\n      var queryString = query ? stringifyQuery(query) : '';\n      if (!searchBaseSpec && !queryString) {\n        return location;\n      }\n\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](stringifyQuery !== defaultStringifyQuery || !isNestedObject(query), 'useQueries does not stringify nested query objects by default; ' + 'use a custom stringifyQuery function') : undefined;\n\n      if (typeof location === 'string') location = _PathUtils.parsePath(location);\n\n      var searchBase = undefined;\n      if (searchBaseSpec && location.search === searchBaseSpec.search) {\n        searchBase = searchBaseSpec.searchBase;\n      } else {\n        searchBase = location.search || '';\n      }\n\n      var search = searchBase;\n      if (queryString) {\n        search += (search ? '&' : '?') + queryString;\n      }\n\n      return _extends({}, location, (_extends2 = {\n        search: search\n      }, _extends2[SEARCH_BASE_KEY] = { search: search, searchBase: searchBase }, _extends2));\n    }\n\n    // Override all read methods with query-aware versions.\n    function listenBefore(hook) {\n      return history.listenBefore(function (location, callback) {\n        _runTransitionHook2['default'](hook, addQuery(location), callback);\n      });\n    }\n\n    function listen(listener) {\n      return history.listen(function (location) {\n        listener(addQuery(location));\n      });\n    }\n\n    // Override all write methods with query-aware versions.\n    function push(location) {\n      history.push(appendQuery(location, location.query));\n    }\n\n    function replace(location) {\n      history.replace(appendQuery(location, location.query));\n    }\n\n    function createPath(location, query) {\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](!query, 'the query argument to createPath is deprecated; use a location descriptor instead') : undefined;\n\n      return history.createPath(appendQuery(location, query || location.query));\n    }\n\n    function createHref(location, query) {\n      process.env.NODE_ENV !== 'production' ? _warning2['default'](!query, 'the query argument to createHref is deprecated; use a location descriptor instead') : undefined;\n\n      return history.createHref(appendQuery(location, query || location.query));\n    }\n\n    function createLocation(location) {\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var fullLocation = history.createLocation.apply(history, [appendQuery(location, location.query)].concat(args));\n      if (location.query) {\n        fullLocation.query = location.query;\n      }\n      return addQuery(fullLocation);\n    }\n\n    // deprecated\n    function pushState(state, path, query) {\n      if (typeof path === 'string') path = _PathUtils.parsePath(path);\n\n      push(_extends({ state: state }, path, { query: query }));\n    }\n\n    // deprecated\n    function replaceState(state, path, query) {\n      if (typeof path === 'string') path = _PathUtils.parsePath(path);\n\n      replace(_extends({ state: state }, path, { query: query }));\n    }\n\n    return _extends({}, history, {\n      listenBefore: listenBefore,\n      listen: listen,\n      push: push,\n      replace: replace,\n      createPath: createPath,\n      createHref: createHref,\n      createLocation: createLocation,\n\n      pushState: _deprecate2['default'](pushState, 'pushState is deprecated; use push instead'),\n      replaceState: _deprecate2['default'](replaceState, 'replaceState is deprecated; use replace instead')\n    });\n  };\n}\n\nexports['default'] = useQueries;\nmodule.exports = exports['default'];"]}